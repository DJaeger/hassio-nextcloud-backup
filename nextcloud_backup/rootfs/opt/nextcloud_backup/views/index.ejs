<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>Nextcloud Backup</title>

    <link rel='stylesheet' href='./css/style.css'/>
    <link rel="stylesheet" href="./css/bootstrap.css">
    <link rel="stylesheet" href="./css/fa-all.min.css">
</head>

<body class="">
<nav class="navbar navbar-dark navbar-expand">
    <div class="container">
        <a href="#" class="navbar-brand p-0">
            <img src="./images/Nextcloud_Logo.svg" height="40">
            <span class="align-middle d-none d-sm-inline">Nextcloud Backup</span>
        </a>
        <ul class="navbar-nav">
            <li class="nav-item dropdown" id="setting-trigger">
                <a class="btn btn-outline-light bg-transparent nav-link px-2 text-white" href="#" id="dropdown-settings"
                   role="button"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-cogs"></i>
                </a>
                <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end" aria-labelledby="dropdown-settings">
                    <li><a href="#" id="trigger-nextcloud-settings"
                           class="modal-trigger dropdown-item">Nextcloud</a>
                    </li>
                    <li><a href="#" id="trigger-backup-settings" class="dropdown-item">Backup</a></li>
                </ul>
            </li>
        </ul>
    </div>
</nav>


<div class="container">
    <div class="row mt-3 mb-3" id="header-box">
        <div class="col-12 col-md-3 mb-3 mb-md-0">
            <div class="card text-white bg-dark h-100 shadow-sm border-secondary">
                <div class="card-header fw-bold h5 border-secondary border-bottom">Status</div>
                <div class="card-body">
                    <h6 id="status" class="white-text"></h6>
                    <div id="status-second-line" class="truncate mb-2 text-accent"></div>
                    <div class="progress bg-secondary invisible" id="progress">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 15%" aria-valuemin="0"
                             aria-valuemax="100"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-3 mb-3 mb-md-0">
            <div class="card text-white bg-dark h-100 shadow-sm border-secondary">
                <div class="card-header fw-bold h5 border-secondary border-bottom">Last Backup</div>
                <div class="card-body">
                    <h6 class="white-text" id="last_back_status"></h6>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-3 mb-3 mb-md-0">
            <div class="card text-white bg-dark h-100 shadow-sm border-secondary">
                <div class="card-header fw-bold h5 border-secondary border-bottom">Next Backup</div>
                <div class="card-body">
                    <h6 class="white-text" id="next_back_status"></h6>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-3">
            <div class="card text-white bg-dark h-100 shadow-sm border-secondary">
                <div class="card-header fw-bold h5 border-secondary border-bottom">Manual</div>
                <div class="card-body">
                    <div class="w-100">
                        <a class="btn btn-success d-block mb-2" id="btn-backup-now">
                            Backup Now
                        </a>
                        <a class="btn btn-danger d-block" id="btn-clean-now">
                        Clean Now
                        </a>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="row">
        <div class="col-12 col-md-12 col-lg-6 mb-3 mb-lg-0">
            <div class="card text-white bg-dark h-100 shadow-sm border-secondary">
                <div class="card-header fw-bold h4 text-center border-secondary border-bottom">Local Snapshots</div>
                <div class="card-body">
                    <div id="local_snaps"></div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-12 col-lg-6 ">
            <div class="card text-white bg-dark h-100 shadow-sm border-secondary">
                <div class="card-header fw-bold h4 text-center border-secondary border-bottom">Snapshots in Nextcloud
                </div>
                <div class="card-body">
                    <h5 class="card-title text-center fw-bold border-bottom border-secondary pb-2">Auto</h5>
                    <div id="auto_backups"></div>
                    <h5 class="card-title text-center fw-bold border-bottom border-secondary mt-3 pb-2">Manual</h5>
                    <div id="manual_backups"></div>
                </div>
            </div>
        </div>

    </div>
</div>


<%- include('modals/nextcloud-settings-modal') %>
<%- include('modals/backup-settings-modal') %>
<%- include('modals/loading-modal') %>
<div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true">
</div>


</body>
<script src="./js/bootstrap.min.js"></script>
<script src="./js/jquery.min.js"></script>
<script src="./js/index.js"></script>
<script src="./js/toast.js"></script>
<script>

</script>

</html>
